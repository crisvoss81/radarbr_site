{% extends 'rb_portal/base.html' %}
{% load rb_filters %}
{% load cloudinary_extras %}

{% block title %}√öltimas not√≠cias | RadarBR{% endblock %}
{% block meta_description %}Acompanhe agora as not√≠cias mais buscadas do Brasil em tempo real: tecnologia, esportes, economia, entretenimento e mais.{% endblock %}

{% block content %}
<section class="grid">
  <div class="main">
    <div class="hero">
      {% if featured %}
        <article class="hero-item">
          <a class="hero-thumb" href="{{ featured.get_absolute_url }}" aria-label="{{ featured.titulo|striptags }}">
            {% if featured.imagem %}
              <img 
                src="{% cloudinary_image_url featured.imagem width=800 height=450 crop='fill' %}"
                {% cloudinary_responsive_image featured.imagem %}
                width="800" height="450"
                loading="eager" fetchpriority="high" decoding="async"
                alt="{{ featured.imagem_alt|default:featured.titulo|striptags }}"
              >
            {% else %}
              <div class="thumb-ph thumb-ph--lg thumb-ph--{{ featured.categoria.slug|default:'geral' }}">
                <div class="thumb-ph-icon">üì∞</div>
                RadarBR
              </div>
            {% endif %}
          </a>
          <div class="hero-body">
            {% if featured.categoria %}<a class="chip" href="{{ featured.categoria.get_absolute_url }}">{{ featured.categoria.nome }}</a>{% endif %}
            <h2 class="hero-title"><a href="{{ featured.get_absolute_url }}">{{ featured.titulo|striptags }}</a></h2>
          </div>
        </article>
      {% endif %}
    </div>

    <!-- AdSense Banner Inline -->
    <div class="ad-slot ad-slot--inline" data-ad-slot="content-inline">
      <div class="ad-placeholder">
        <div class="ad-label">Publicidade</div>
        <div class="ad-size">728x90</div>
      </div>
    </div>

    <div class="list">
      {% for obj in page_obj.object_list|slice:'1:' %}
        {% include 'rb_portal/includes/_card.html' with obj=obj %}
        
        <!-- AdSense entre cards (a cada 4 not√≠cias) -->
        {% if forloop.counter|divisibleby:4 and not forloop.last %}
          <div class="ad-slot ad-slot--between-cards" data-ad-slot="content-between-{{ forloop.counter }}">
            <div class="ad-placeholder">
              <div class="ad-label">Publicidade</div>
              <div class="ad-size">728x90</div>
            </div>
          </div>
        {% endif %}
      {% empty %}
        <p class="muted">Nenhuma not√≠cia encontrada.</p>
      {% endfor %}
    </div>

    {% include 'rb_portal/includes/_pagination.html' %}
  </div>

  <aside class="aside">
    {% include 'rb_portal/includes/_sidebar.html' %}
  </aside>
</section>
{% endblock %}