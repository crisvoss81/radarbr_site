{% extends 'rb_portal/base.html' %}
{% load rb_filters %}
{% load cloudinary_extras %}

{% block title %}Ãšltimas notÃ­cias | RadarBR{% endblock %}
{% block meta_description %}Acompanhe agora as notÃ­cias mais buscadas do Brasil em tempo real: tecnologia, esportes, economia, entretenimento e mais.{% endblock %}

{% block content %}
<section class="grid">
  <div class="main">
    <!-- Super Destaque - Imagem Grande com TÃ­tulo Sobreposto -->
    <div class="super-hero">
      {% if featured %}
        <article class="super-hero-item">
          <a class="super-hero-thumb" href="{{ featured.get_absolute_url }}" aria-label="{{ featured.titulo|striptags }}">
            {% if featured.imagem %}
              <img 
                src="{% cloudinary_image_url featured.imagem width=1200 height=600 crop='fill' %}"
                {% cloudinary_responsive_image featured.imagem %}
                width="1200" height="600"
                loading="eager" fetchpriority="high" decoding="async"
                alt="{{ featured.imagem_alt|default:featured.titulo|striptags }}"
              >
            {% else %}
              <div class="super-thumb-ph super-thumb-ph--{{ featured.categoria.slug|default:'geral' }}">
                <div class="super-thumb-ph-icon">ðŸ“°</div>
                RadarBR
              </div>
            {% endif %}
            <div class="super-hero-overlay">
              {% if featured.categoria %}<span class="super-chip">{{ featured.categoria.nome }}</span>{% endif %}
              <h1 class="super-hero-title">{{ featured.titulo|striptags }}</h1>
            </div>
          </a>
        </article>
      {% endif %}
    </div>

    <!-- TrÃªs Imagens em Destaque com TÃ­tulos Abaixo -->
    <div class="featured-grid">
      {% for obj in page_obj.object_list|slice:':3' %}
        <article class="featured-item">
          <a class="featured-thumb" href="{{ obj.get_absolute_url }}" aria-label="{{ obj.titulo|striptags }}">
            {% if obj.imagem %}
              <img 
                src="{% cloudinary_image_url obj.imagem width=400 height=250 crop='fill' %}"
                {% cloudinary_responsive_image obj.imagem %}
                width="400" height="250"
                loading="lazy" decoding="async"
                alt="{{ obj.imagem_alt|default:obj.titulo|striptags }}"
              >
            {% else %}
              <div class="featured-thumb-ph featured-thumb-ph--{{ obj.categoria.slug|default:'geral' }}">
                <div class="featured-thumb-ph-icon">ðŸ“°</div>
                RadarBR
              </div>
            {% endif %}
          </a>
          <div class="featured-content">
            {% if obj.categoria %}<span class="featured-chip">{{ obj.categoria.nome }}</span>{% endif %}
            <h3 class="featured-title"><a href="{{ obj.get_absolute_url }}">{{ obj.titulo|striptags }}</a></h3>
          </div>
        </article>
      {% empty %}
        <p class="muted">Nenhuma notÃ­cia encontrada.</p>
      {% endfor %}
    </div>

    <!-- Lista de NotÃ­cias Restantes -->
    <div class="list">
      {% for obj in page_obj.object_list|slice:'3:' %}
        {% include 'rb_portal/includes/_card.html' with obj=obj %}
      {% empty %}
        <p class="muted">Nenhuma notÃ­cia encontrada.</p>
      {% endfor %}
    </div>

    {% include 'rb_portal/includes/_pagination.html' %}
  </div>

  <aside class="aside">
    {% include 'rb_portal/includes/_sidebar.html' %}
  </aside>
</section>
{% endblock %}