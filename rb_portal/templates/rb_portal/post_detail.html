{% extends 'rb_portal/base.html' %}
{% load rb_filters %}
{% load markdown_extras %}
{% load cloudinary_extras %}

{% block title %}{{ object.titulo|striptags }} | RadarBR{% endblock %}
{% block meta_description %}{{ object.conteudo|striptags|truncatechars:150 }}{% endblock %}

{% block content %}
<article class="post">
  <header class="post-header">
    {% if object.categoria %}<a class="chip" href="{{ object.categoria.get_absolute_url }}">{{ object.categoria.nome }}</a>{% endif %}
    <h1 class="post-title">{{ object.titulo|striptags }}</h1>
    <div class="post-meta">Publicado em {{ object.publicado_em|date:'d \d\e F \d\e Y, H\hi' }}</div>
  </header>

  {% if object.imagem %}
    <figure class="post-figure">
      <img 
        src="{% cloudinary_image_url object.imagem width=1200 height=630 %}" 
        {% cloudinary_responsive_image object.imagem %}
        alt="{{ object.imagem_alt|default:object.titulo|striptags }}"
      >
      {% if object.imagem_credito %}
        <figcaption class="muted" style="font-size:.85rem">
          Cr√©dito: 
          {% if object.imagem_fonte_url %}
            <a href="{{ object.imagem_fonte_url }}" target="_blank" rel="noopener noreferrer">{{ object.imagem_credito }}</a>
          {% else %}
            {{ object.imagem_credito }}
          {% endif %}
        </figcaption>
      {% endif %}
    </figure>
  {% endif %}

  <div class="post-content">
    {{ object.conteudo|render_markdown }}
  </div>
</article>
{% endblock %}