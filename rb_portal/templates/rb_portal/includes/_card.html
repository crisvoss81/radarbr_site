{% load rb_filters %}
{% load cloudinary_extras %}
<article class="card">
  <a class="card-thumb" href="{{ obj.get_absolute_url }}" aria-label="{{ obj.titulo|striptags }}">
    {% if obj.imagem %}
      <img
        loading="lazy"
        src='{% cloudinary_image_url obj.imagem width=400 height=225 crop="fill" %}'
        {% cloudinary_responsive_image obj.imagem %}
        width="400" height="225"
        decoding="async"
        alt="{{ obj.imagem_alt|default:obj.titulo|striptags }}"
      >
    {% else %}
      <div class="thumb-ph thumb-ph--{{ obj.categoria.slug|default:'geral' }}">
        <div class="thumb-ph-icon">ðŸ“°</div>
        RadarBR
      </div>
    {% endif %}
  </a>
  <div class="card-body">
    {% if obj.categoria %}
      <a class="chip" href="{{ obj.categoria.get_absolute_url }}">{{ obj.categoria.nome }}</a>
    {% endif %}
    <h3 class="card-title"><a href="{{ obj.get_absolute_url }}">{{ obj.titulo|striptags }}</a></h3>
    {% with dek_text=obj.conteudo|extract_dek %}
      {% if dek_text %}
        <p class="card-resumo">{{ dek_text|truncatechars:160 }}</p>
      {% endif %}
    {% endwith %}
    <div class="card-meta">{{ obj.publicado_em|date:'d \\d\\e F, H\\hi' }}</div>
  </div>
</article>
